window._roost||(window._roost=[]),_roost.init||!function(e){function s(){t.appkey="236c5ee7b0514b47bbe6115a83ebafd0",o();var e,r;t.appkey!="DEMO"&&window&&typeof window.safari!="undefined"&&(e=N,r=T),e&&(i.prompt=function(){e(!1)}),r&&(t.rdt=r()),t.rdt||(t.rdt=w("_rdt")),t.rid=w("_rid"),(!t.rid||t.rid=="")&&p()&&(t.rid=a(),b("_rid",t.rid)),h("host");var s=t.host+"/api/pageview?rdt="+encodeURIComponent(t.rdt)+"&rid="+encodeURIComponent(t.rid)+"&appKey="+encodeURIComponent(t.appkey)+"&url="+encodeURIComponent(document.URL)+"&referrer="+encodeURIComponent(document.referrer),u=new n.Socket({remote:s,props:{style:{height:0,width:0}},onMessage:function(n,r){if(r.indexOf("goroost.com")!=-1||r.indexOf("roost.me")!=-1||r.indexOf(":8080")!=-1||r.indexOf(":8081")!=-1||r.indexOf("localtunnel.com")!=-1){var s=JSON.parse(n);t.enabled=s.enabled,t.tags=s.tags,t.alias=s.alias;for(var o=0;o<_roost.length;o++)i.push(_roost[o]);_roost=i,_roost._o=t;var u=t.onload;u&&typeof u=="function"&&u({promptable:_roost.promptable()}),e&&e(!0)}}})}function o(){typeof twttr!="undefined"&&typeof twttr.events!="undefined"&&typeof twttr.events.bind!="undefined"&&twttr.events.bind("tweet",function(e){i.push(["social_action","TWEET"])}),typeof FB!="undefined"&&typeof FB.Event!="undefined"&&typeof FB.Event.subscribe!="undefined"&&(FB.Event.subscribe("edge.create",function(e){i.push(["social_action","FB_LIKE"])}),FB.Event.subscribe("edge.remove",function(e){i.push(["social_action","FB_UNLIKE"])}),FB.Event.subscribe("comment.create",function(e){i.push(["social_action","FB_COMMENT"])}),FB.Event.subscribe("comment.remove",function(e){i.push(["social_action","FB_UNCOMMENT"])}),FB.Event.subscribe("message.send",function(e){i.push(["social_action","FB_SHARE"])}))}function u(){return location.protocol=="https:"}function a(){function e(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function h(e){var t=[];for(var n=0;n<_roost.length;n++)_roost[n].length&&_roost[n][0]==e?i.push(_roost[n]):t.push(_roost[n]);_roost=t}function p(){var e="cc"+Math.random(),t=!1;return b(e,"true"),w(e)&&(t=!0),b(e,"",-1),t}function d(n){m({url:t.host+"/Ping",vars:{appKey:t.appkey,referrer:encodeURIComponent((document.referrer+"").split("'").join("%27")),page:encodeURIComponent((e.location+"").split("'").join("%27")),action:"log",details:n?JSON.stringify(n):"",rdt:w("_rdt")}})}function v(e){S(document.getElementById("roost_modal"),e),document.getElementById("roost_overlay").style.display="block",document.getElementById("roost_modal").style.display="block",navigator.userAgent.indexOf("Nexus")!=-1&&window.scrollTo(0,0)}function m(e){e=e||{},e.url=e.url||null,e.vars=e.vars||{},e.error=e.error||function(){},e.success=e.success||function(){};var t=[];for(var n in e.vars)t.push(n+"="+encodeURIComponent(e.vars[n]));var r=t.join("&");if(e.url){var i=e.url+"?"+r,s=new Image;e.error&&(s.onerror=e.error),e.success&&(s.onload=e.success),s.src=i}}function g(e){t[e[0]]=typeof e[1]=="undefined"?t[e[0]]:e[1]}function y(e){return function(n){if(!t.appkey)return!1;e(n)}}function b(e,t,n,r){n||(n=0);var i=new Date;i.setTime(i.getTime()+n*24*60*60*1e3);var s=escape(t)+(n==null||n==0?"":"; expires="+i.toGMTString())+"; "+(r?" domain=."+r+"; ":"")+" path=/";document.cookie=e+"="+s}function w(e){if(document.cookie.length>0){c_start=document.cookie.indexOf(e+"=");if(c_start!=-1)return c_start=c_start+e.length+1,c_end=document.cookie.indexOf(";",c_start),c_end==-1&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))}return""}function S(e,t){var n=new _roostEasyXDMSocket({remote:t,props:{style:{height:0,width:0}},container:e,onMessage:function(e,t){if(t.indexOf("goroost.com")!=-1||t.indexOf("roost.me")!=-1||t.indexOf(":8080")!=-1||t.indexOf("localtunnel.com")!=-1){var r=JSON.parse(e);if(r.action=="broadcast")for(var i=0;i<E.length;i++)n!=E[i]&&E[i].postMessage(r.message)}}});return n.id=E.length,E.push(n),n}function T(){var e="web.web.me.roost.autodd4f1ae4179540b6a7f5e10ff594357f",t=window.safari.pushNotification.permission(e);if(t.permission=="granted")return t.deviceToken}function N(e){typeof e=="undefined"&&(e=!1);var t="web.web.me.roost.autodd4f1ae4179540b6a7f5e10ff594357f",n=!1,r=location.host,i=location.host.split(".").reverse();i.length>1&&r.indexOf("blogger.com")==-1&&(r=i[1]+"."+i[0]),r=r.split(":")[0];var s=function(){n=!0;var e=_roost._getTags(),r=_roost._getAlias();window.safari.pushNotification.requestPermission("https://go.goroost.com/register/native/safari/236c5ee7b0514b47bbe6115a83ebafd0",t,{website:encodeURIComponent(location.href),data:"{'tags':'"+e+"','alias':'"+r+"'}"},x)},o=window.safari.pushNotification.permission(t);if(o.permission=="default"){var u=_roost._isAutoPrompt(),a=_roost._promptMinVisits();(!e||u||a)&&s()}else o.permission=="granted"?(_roost._fireRoostCallback({firstTime:!1,deviceToken:o.deviceToken,registered:!0,enabled:_roost._isEnabled(),tags:_roost._getTags(),alias:_roost._getAlias()}),o.deviceToken&&_roost.setCookie("_rdt",o.deviceToken,1825,r)):_roost._fireRoostCallback({firstTime:!1,deviceToken:o.deviceToken,registered:!1,enabled:_roost._isEnabled(),tags:_roost._getTags(),alias:_roost._getAlias()})}function C(){n=easyXDM,document.readyState==="interactive"||document.readyState==="complete"?s():document.addEventListener?window.addEventListener("load",s):document.attachEvent("onload",s)}var t={autoprompt:!0,appkey:null,host:(u()?"https://":"http://")+"go.goroost.com",rdt:"none",rid:null,tags:null,alias:null,enabled:!1},n,r=[],i={init:!0,push:function(){for(var t=0;t<arguments.length;t++){var n=arguments[t];n&&n.length&&c[""+n[0].toLowerCase()]?c[n[0].toLowerCase()](n):e.console.log("Invalid command '"+n+"'.")}},getCookie:w,setCookie:b,promptable:function(){return typeof window.safari!="undefined"&&typeof window.safari.pushNotification!="undefined"?!0:!1},prompt:function(){},_fireRoostCallback:function(e){window._roostCallback&&typeof window._roostCallback=="function"&&window._roostCallback(e),t.onresult&&typeof t.onresult=="function"&&t.onresult(e)},_isAutoPrompt:function(){return t.autoprompt},_isEnabled:function(){return t.enabled},_getTags:function(){return t.tags},_getAlias:function(){return t.alias},_getRID:function(){return t.rid},_domain:function(){var e=location.host,t=location.host.split(".").reverse();return t.length>1&&e.indexOf("blogger.com")==-1&&(e=t[1]+"."+t[0]),e=e.split(":")[0],e},_cookiesEnabled:function(){var e="cc"+Math.random(),t=!1;return _roost.setCookie(e,"true"),_roost.getCookie(e)&&(t=!0),_roost.setCookie(e,"",-1),t},_promptMinVisits:function(){if(t.minvisits>-1){if(!_roost._cookiesEnabled())return!1;var e="_r_visits",n=_roost.getCookie(e);return n?n++:n=1,_roost.setCookie(e,n,30,_roost._domain()),t.minvisits<=n}return!1},_enqueue:function(e){r.push(e),r.length==1&&i._processQueue()},_processQueue:function(){if(r.length){var e=r[0];e()}},_workFinished:function(){r.length&&(r.shift(),i._processQueue())},showModal:v},f=y(function(e){var n=[];for(var r=1;r<e.length;r++)n.push(e[r]);var s=e[0];if(s=="tags"||s=="segments")t.tags=n;else if(s=="segments_add")t.tags?t.tags=t.tags.concat(n):t.tags=n;else if(s=="segments_clear")t.tags&&(t.tags=[]);else if(s=="segments_remove"&&t.tags){for(var o=0;o<n.length;o++){var u=n[o],a=t.tags.indexOf(u);a>-1&&t.tags.splice(a,1)}t.tags=t.tags.concat(n)}i._enqueue(function(){t.rdt?m({url:t.host+"/Ping",vars:{action:s,appKey:t.appkey,tags:JSON.stringify(n),rdt:t.rdt},success:i._workFinished}):i._workFinished()})}),l=y(function(e){var n=null;e&&e.length==2&&(n=e[1]);var r=e[0];r=="alias"?t.alias=n:r=="alias_clear"&&(t.alias=null),i._enqueue(function(){t.rdt?m({url:t.host+"/Ping",vars:{action:e[0],appKey:t.appkey,alias:n,rdt:t.rdt},success:i._workFinished}):i._workFinished()})}),c={appkey:function(){},onload:g,onresult:g,host:g,minvisits:g,tags:f,segments:f,segments_add:f,segments_remove:f,segments_clear:f,alias:l,alias_clear:l,autoprompt:g,prompt:function(){_roost.prompt&&_roost.prompt()},log:function(e){d(e[1])},social_action:y(function(e){m({url:t.host+"/Ping",vars:{action:"socialAction",appKey:t.appkey,useraction:e[1],rdt:w("_rdt")}})}),enable:y(function(e){i._enqueue(function(){m({url:t.host+"/Ping",vars:{action:"enable",appKey:t.appkey,enable:e[1],rdt:t.rdt},success:i._workFinished})})})},E=[],x=function(e){t.rdt=e.deviceToken,_roost._fireRoostCallback({firstTime:!0,deviceToken:e.deviceToken,registered:e.permission!="denied",enabled:!0,tags:_roost._getTags(),alias:_roost._getAlias()}),e.permission=="granted"&&_roost.setCookie("_rdt",e.deviceToken,1825,domain)};!function(e,t,n){var r,i=e.getElementsByTagName(t)[0];e.getElementById(n)?C():(r=e.createElement(t),r.id=n,r.onload=function(){C()},r.src="//cdn.goroost.com/cdn/easyXDM-2.4.19.3.min.js",i.parentNode.insertBefore(r,i))}(document,"script","roost-easyxdm-js")}(window)